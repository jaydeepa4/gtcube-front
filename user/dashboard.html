<!DOCTYPE html>
<!--[if lt IE 7]> <html class="lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Login Form</title>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
   <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/animate.css@3.5.2/animate.min.css">
  <!-- or -->
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">


  <!-- Font links here -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Arimo" rel="stylesheet">  
<style>
/*blue-4cdef5
green-a4d555
blue-grey -424a5d

sky blue-Dashgum - 68dff0*/

/* 1. Green- 4abdac
      Red - fc4a1a
      Orange- F7b733
      grey - DFDCe3
    */



/*----------------------------------------------CSS for nav bar -----------------------------------------------*/   

nav{
  /*background-color:#4abdac;*/
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#77c9d4+0,77c9d4+0,57bc90+100 */
background: #57bc90; /* Old browsers */
background: -moz-linear-gradient(-45deg, ##77cad5 0%, #77cad5 0%, #57bc90 100%); /* FF3.6-15 */
background: -webkit-linear-gradient(-45deg, #77cad5 0%,#77cad5 0%,#57bc90 100%); /* Chrome10-25,Safari5.1-6 */
background: linear-gradient(135deg, #77cad5 0%,#77cad5 0%,#57bc90 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#77cad5', endColorstr='#57bc90',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

nav ul li.active{
  background-color:#77cad5;
}

nav ul li:hover{
   background-color:#77cad5;
}

nav ul li a:hover{
  background-color:#77cad5;
  opacity:1;
  color:white;
 /* border-bottom:4px solid #57bc90;*/
}

.brand-logo{
  margin-left:10px;
  margin-top:2px;
}


/*--------------*Mobile nav bar code----------------------------*/

.side-nav{
  /*background-color:#4abdac;*/
/* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#77c9d4+0,77c9d4+0,57bc90+100 */
background: #57bc90; /* Old browsers */
background: -moz-linear-gradient(-45deg, #77c9d4 0%, #77c9d4 0%, #57bc90 100%); /* FF3.6-15 */
background: -webkit-linear-gradient(-45deg, #77c9d4 0%,#77c9d4 0%,#57bc90 100%); /* Chrome10-25,Safari5.1-6 */
background: linear-gradient(135deg, #77c9d4 0%,#77c9d4 0%,#57bc90 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#77c9d4', endColorstr='#57bc90',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

.side-nav a>li{
  color:white;
}


/*------------------------------------------------CSS for side nav bar----------------------------------------------------*/


#sidebar{
  color:#77cad5;
  background-color:white;
}

.sidebaritem:hover{
   background-color:#77c9d4/*68dff0*/;
   color:white;
   transition: all .35s ease-in;
  /*background-position: 0 0;*/
}

.sidebaritem{
  padding:15px 30px;
  cursor:pointer;
  border-bottom: 1px dotted #77cad5;
}


 #display_image img{
    display:block;
    margin: 0 auto;
 }

 #display_name{
  padding:15px 5px;
  text-align:center;
  border-bottom: 1px dotted #77cad5;
  /*border-bottom: 1px solid grey*/
 }

.verticalalign{
  vertical-align: middle;
}
/*------------------------------------------------CSS for main content----------------------------------------------------*/
      /*-------------------------------CSS for generic blog posts-------------*/

.tabs .tab a{
  color:#77cad5;
}

.tabs .tab a:hover{
  color:#77cad5;
}

.tabs .tab a.active{
  color:#77cad5;
}

.tabs .indicator{
  background-color: #57bc90;
}
#maincontent{
  background-color:#ffffff;
}
      /*-------------------------------CSS for generic blog posts-------------*/

.post{
  margin-bottom:10px;
  margin-top:10px;
  -webkit-border-radius: 5px 5px 5px;
  border-radius: 5px 5px 5px;
}


.padding_post{
  min-width:100%;
}


.post .chip{
  background-color:#ffffff;
  float:right;
  font-style:'open sans',serif;
}

.post_tags{
  padding-top:4px;
}


.post_content{
  padding-left:20px;
  padding-right:20px;
}

.post_without_tags{
  cursor:pointer;
}

.post_title{
  padding-left:20px;
  padding-right:20px;
  /*font-weight:bold;*/
  color:#77c9d4;
  line-height:135%;
  text-align: center;
  font-family: 'Open Sans', serif;
  font-size:1.2em;

}

.post_title:hover{
  color:#57bc90;
  text-decoration: underline;
  cursor:pointer;
}

.post{
  margin-left:10%;
  margin-top:4%
}

.post_text{
  border-top: 4px solid #57bc90;
}

.load_more{
  margin-top:20px;
  width:60%;
  margin-left:15%;
  margin-right:auto;
  background-color: #015249;
}

/*------------------------------------------------CSS for footer----------------------------------------------------*/

.page-footer{
  background-color:#66b9bf;
  /* Permalink - use to edit and share this gradient: http://colorzilla.com/gradient-editor/#77c9d4+0,77c9d4+0,57bc90+100 */
background: #57bc90; /* Old browsers */
background: -moz-linear-gradient(-45deg, #57bc90 0%, #57bc90 0%, #77c9d4 100%); /* FF3.6-15 */
background: -webkit-linear-gradient(-45deg, #57bc90 0%,#57bc90 0%,#77c9d4 100%); /* Chrome10-25,Safari5.1-6 */
background: linear-gradient(135deg, #57bc90 0%,#57bc90 0%,#77c9d4 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#77c9d4', endColorstr='#57bc90',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */
}

.row{
  margin-bottom:0px;
}


/*------------------------------------------------CSS for body, main ----------------------------------------------------*/
 body {
     display: flex;
     min-height: 100vh;
     flex-direction: column;
     font-family: 'Arimo',sans-serif;
 }
 main {
     flex: 1 0 auto;
 }



</style>

  <!-- Compiled and minified JavaScript -->
  
  <script
  src="https://code.jquery.com/jquery-3.2.1.min.js"
  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
  crossorigin="anonymous"></script>      
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
  <!-- <link rel="stylesheet" href="css/style.css"> -->
  <!--[if lt IE 9]><script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.17.0/axios.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.transit/0.9.12/jquery.transit.min.js"></script>
   <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>


<body>
  <!-- Header -->
  
   <nav>
    <div class="nav-wrapper">
      <a href="#" class="brand-logo"><img src='../logo.png' width='60vh'></a>
      <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li class=''><a href="profile.html">Profile</a></li>
        <li><a href="courses.html">Available Courses</a></li>
        <li><a href="coursedetail.html">Your Courses</a></li>
        <li><a href="logout.html">Logout</a></li>
      </ul>

       <ul class="side-nav" id="mobile-demo">
        <li><a href="profile.html">Profile</a></li>
        <li><a href="courses.html">Available Courses</a></li>
        <li><a href="coursedetail.html">Your Courses</a></li>
        <li><a href="logout.html">Logout</a></li>
        <li><a class='back' href="">Back</a></li>
      </ul>
    </div>
  </nav>
  <!-- Header ends here -->
  <!-- Page content starts here -->
  <main>
    <div class='row'>
    <!-- Side Nav Bar -->
    <div class="col s12 m2 l2" id='sidebar'>
      <div class='inside_sidebar'>
        <ul>

          <li id='display_image' class=''><img src="../avatar.jpg" width='50%' alt="" class="circle responsive-img"></li>
          <li id='display_name' class=''>Welcome Jaydeep</li>
          <li id='item2' class='sidebaritem'> <i class="tiny material-icons verticalalign">developer_board</i>&nbsp;&nbsp;<span class='verticalalign'>Your News</span></li>
          <li id='item3' class='sidebaritem'> <i class="tiny material-icons verticalalign">import_contacts</i>&nbsp;&nbsp;<span class='verticalalign'>Your Courses</span></li>
           <li id='item4' class='sidebaritem'> <i class="tiny material-icons verticalalign">account_circle</i>&nbsp;&nbsp;<span class='verticalalign'>Your Profile</span></li>
           <li id='item5' class='sidebaritem'> <i class="tiny material-icons verticalalign">fingerprint</i>&nbsp;&nbsp;<span class='verticalalign'>Your Password</span></li>
        </ul>
      </div>
    </div>

    <!-- Side Nav Bar Ends here -->
        
    <!-- Main Content starts here-->
      <div class="col s12 m10 l10" id='maincontent'>
      <!-- Buttons to filter -->
      <div id='main_button'>
         <div class="row">
          <div class="col s12">
            <ul class="tabs">
              <li class="tab col s4"><a href="#test1">All</a></li>
              <li class="tab col s4"><a class="active" href="#test2">Blog Articles</a></li>
              <li class="tab col s4"><a href="#test4">Course Notifications</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Main text starts here -->
      <div id='main_text'>
        <div class='row'>
          <!-- Post 1 starts here -->
          <div class='col s12 m10 l10'>
            <div class='row post z-depth-1' id='post1'>
              <!-- Image + Post text div  starts here -->
               <!-- Image div  starts here -->
                <div class="col s12 m5 l5 post_image" style='padding:0px;'>
                  <img src="../taj.png" width='100%'>
                </div>
                 <!-- Image  div  ends here -->
                  <!-- Post text div  starts here -->
                <div class='col s12 m7 l7 post_text'>
                <div class='post_title'>
                   Tips to crack CAT 2018 exam - Quantitative Aptitute section
                </div>
                
                <div class="post_content">
                  <p>I am a very simple card. I am good at containing small bits of information.
                    I am convenient because I require little markup to use effectively.
                  </p>
                </div>


                <div class="chip author">
                  <img src="../avatar.jpg" alt="Contact Person">
                  Jane Doe, 3 mins ago
                </div>
              </div>
               <!--  Post text div  ends here -->
             <!-- Image + Post text div  ends here -->
          </div>
        </div>
        <!-- Post 1 ends here -->
        <!-- Post 2 starts here -->
         <div class='col s12 m10 l10'>
            <div class='row post z-depth-1' id='post2'>
              <!-- Image + Post text div  starts here -->
               <!-- Image div  starts here -->
                <div class="col s12 m5 l5 post_image" style='padding:0px;'>
                  <img src="../books.Jpeg" width='100%'>
                </div>
                 <!-- Image  div  ends here -->
                  <!-- Post text div  starts here -->
                <div class='col s12 m7 l7 post_text'>
                <div class='post_title'>
                   Tips to crack CAT 2018 exam - Verbal Ability section
                </div>
                
                <div class="post_content">
                  <p>I am a very simple card. I am good at containing small bits of information.
                    I am convenient because I require little markup to use effectively.
                  </p>
                </div>


                <div class="chip author">
                  <img src="../avatar.png" alt="Contact Person">
                  Jane Doe, 4 mins ago
                </div>
              </div>
               <!--  Post text div  ends here -->
             <!-- Image + Post text div  ends here -->
          </div>
        </div>
        <!-- Post 2 ends here -->

        <!-- Post 3 starts here -->
         <div class='col s12 m10 l10'>
            <div class='row post z-depth-1' id='post3'>
              <!-- Image + Post text div  starts here -->
               <!-- Image div  starts here -->
                <div class="col s12 m5 l5 post_image" style='padding:0px;'>
                  <img src="../di.Jpeg" width='100%'>
                </div>
                 <!-- Image  div  ends here -->
                  <!-- Post text div  starts here -->
                <div class='col s12 m7 l7 post_text'>
                <div class='post_title'>
                   Tips to crack CAT 2018 exam - Data Interpretation section
                </div>
                
                <div class="post_content">
                  <p>I am a very simple card. I am good at containing small bits of information.
                    I am convenient because I require little markup to use effectively.
                  </p>
                </div>


                <div class="chip author">
                  <img src="../avatar.png" alt="Contact Person">
                  Jane Doe, 5 mins ago
                </div>
              </div>
               <!--  Post text div  ends here -->
             <!-- Image + Post text div  ends here -->
          </div>
        </div>
        <!-- Post 3 ends here -->
      </div>
    </div>
    <!-- Main text ends here -->
    <!-- Load More Button here -->
    <a class="waves-effect waves-light btn load_more"><i class="material-icons verticalalign">add_box</i>&nbsp;<span class='verticalalign'>Load more</span></a>
  </div>
      <!-- Main Content ends here-->
    </div>
  </main>
<!-- Footer starts here -->
     <footer class="page-footer">
          <div class="container">
            <div class="row">
              <div class="col l6 s12">
                <h5 class="white-text">Footer Content</h5>
                <p class="grey-text text-lighten-4">You can use rows and columns here to organize your footer content.</p>
              </div>
              <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Links</h5>
                <ul>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 1</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 2</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 3</a></li>
                  <li><a class="grey-text text-lighten-3" href="#!">Link 4</a></li>
                </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
            © 2014 Copyright Text
            <a class="grey-text text-lighten-4 right" href="#!">More Links</a>
            </div>
          </div>

        </footer>
  <!-- Footer ends here -->
</body>
<script>
var user_id = ''
var user_details = ''
var formData =  new FormData();

$(document).ready(function(){
//MaterializeCSS JS code
$(".button-collapse").sideNav();

$('#mobile-demo .back').click(function(){
  $('.button-collapse').sideNav('hide');
})
//To adjust height of side navbar 
  adjustHeight()
  //To adjust Blog post cards
  fixBlogPost()

$(window).resize(function(){
  //To adjust height of side navbar 
  adjustHeight()
  //To adjust Blog post cards
  fixBlogPost()
  });

  function fixBlogPost(){
    for (var i =1 ; i<=3;i++){
      $('#post'+i+' .post_image img').height($('#post'+i+' .post_text').height());
    } 
  }

$(window).scroll(function(){
  if($('#sidebar').width() != $('#maincontent').width()){
    //It means screen is not on small mode and hence fix side bar
    fixSidebar()
  }
  });

  function adjustHeight(){
    if($('#sidebar').width() <= $('#maincontent').width()-1){
      //Sidebar is smaller than maincontent and hence its not on small mode
      if($('#sidebar').height()<=$('#maincontent').height()){
        //Sidebar height needs to be set equal to maincontent
        $('#sidebar').css('min-height',$('#maincontent').height())
      }else{
        //Sidebar is taller than main content and need to ensure that both occupy full space with footer sticking to base
         $('#sidebar').css('min-height',$(document).height()-$('nav').height()-$('footer').height())
         $('#maincontent').css('min-height',$(document).height()-$('nav').height()-$('footer').height())
      }
    }else{
      //Sidebar filled entire width of the screen and hence height should be simple 100%
      $('#sidebar').css('min-height','100%')
    }
    
    }

  function fixSidebar(){
    //Find the location of screen from top
    var current =  $(window).scrollTop();
    var navheight = $('nav').height()
    if(current > navheight){
      $('.inside_sidebar').css('margin-top',current-navheight)
    }else{
      $('.inside_sidebar').css('margin-top','0px')
    }
    
  }



//Jquery animate library JS Code

  function animateDOM(className,css_initialvalue,transition_finalvalue){
      $(className).css(css_initialvalue);
      $(className).transition(transition_finalvalue);
  }

  animateDOM('#display_image',{'scale':'0'},{'scale':'1',duration:400,easing:'in'})
  animateDOM('.sidebaritem,#display_name',{'x':'-50px'},{'x':'0px',duration:400,easing:'in'})
  animateDOM('nav ul li',{'y':'-50px'},{'y':'00px',duration:400,easing:'in'})
  for(i=1;i<=3;i++){
    if(i%2 == 0){
      animateDOM('#post'+i,{'opacity':'0', 'scale':'0'},{'opacity':'1', 'scale':'1',duration:1000,easing:'in'}) 
     }else{
      animateDOM('#post'+i,{'opacity':'0', 'scale':'0'},{'opacity':'1', 'scale':'1',duration:1000,easing:'in'}) 
     } 
    }


  function some_callback(){
    console.log('done')
  }
  //API Call JS Code
  get_user_details()
  

  function parseJwt (token) {
    var base64Url = token.split('.')[1];
    var base64 = base64Url.replace('-', '+').replace('_', '/');
    return JSON.parse(window.atob(base64));
  };

  function get_user_details(){ 
    //First identify the user from token
    user_details = parseJwt(localStorage.getItem('key_id'))
    console.log(user_details.email)
    axios({
    method: 'get',
    url: 'https://gtcube.herokuapp.com/seller/sellerdetail/'+user_details.email,
    }).then(function(response){
    //Successful response
    if(response.data){
    //Received the data
    get_profile_data(response.data['id'])
    user_id = response.data['id']
    
    }
    }).catch(function(error){
    console.log(error.response)
    
    });

  }

 function get_profile_data(user_id){
   //1. Collect the details from GET request
  axios({
  method: 'get',
  url: 'https://gtcube.herokuapp.com/seller/profile/'+user_id,
  headers: { Authorization: "JWT "+localStorage.getItem('key_id') },
}).then(function(response){
  //Successful response
  if(response.data){
    //Received the data
    //Add display image
    //$('#display_image').html('<img width=90% src="'+response.data['display_image']+'"></img><p>Display Picture</p>')
    //Fill the fields
    $('#email').val(response.data['email'])
    $('#phone').val(response.data['phone'])
    $('#country').val(response.data['country'])
  }
  }).catch(function(error){
    console.log(error.response)
  });
 }
  
 //2. Update the details with POST request
$('#update_button').click(function(){
   

  //Input fields updating
  var email = $('#email').val()
  var phone = $('#phone').val()
  var country = $("#country").val()

  formData.append("email", email);
  formData.append("phone", phone);
  formData.append("country", country);
  //formData.append("display_image", $("#display_image_field")[0].files[0]);

  axios({
  method: 'put',
  url: 'https://gtcube.herokuapp.com/seller/profile/'+user_id+'/',
  headers: { Authorization: "JWT "+localStorage.getItem('key_id') },
  /* headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/json'
  },*/
  data: formData
}).then(function(response){
    get_profile_data(user_id)
  console.log(response.data)
  }).catch(function(error){
    console.log(error.response)
  });

})  

})

</script>

</html>